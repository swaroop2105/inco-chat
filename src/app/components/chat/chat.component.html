<div class="layoutColor">

</div>
<div class="d-flex justify-content-center">
    <div class="maincard">
      <mat-toolbar>
        <span class="text-light">{{chatRoom.chatName}}</span>
        <span class="example-spacer"></span>
        <button mat-icon-button class="example-icon favorite-icon" aria-label="Example icon-button with heart icon">
          <mat-icon class="text-light" [matBadge]=chatCounter matBadgeColor="warn" matBadgeSize="small">chat_bubble_outline</mat-icon>
        </button>
        <button   mat-icon-button class="example-icon" aria-label="Example icon-button with share icon">
          <mat-icon class="text-light" (click)="leaveRoom()" >logout</mat-icon>
        </button>
      </mat-toolbar>



          <div class="row nmbl" >
              <div class="col-lg-3 sideMenu" >
                  <ul class="list-group">
                      <li class="list-group-item ">
                         <b> Team {{chatRoom.chatName}}</b>
                      </li>
                     <li class="list-group-item">
                        <div class="row">
                            <div class="col-lg-2"></div>
                            <div class="col-lg-4">

                                <img src="{{avathars[0]}}" [matBadge]=chatCounter matBadgeColor="warn" matBadgeSize="small" class="userImage" alt="">

                            </div>
                            <div class="col-lg-6">
                                <p data-bs-toggle="tooltip" data-bs-placement="top" title="Tooltip on top" ><b>{{admin.memberName}} </b><sup><span class="adminBtn text-muted">Group Admin</span></sup></p>
                                <sup data-bs-toggle="tooltip" data-bs-placement="top" title="Tooltip on top" *ngIf="admin.memberName==userName" ><b>(You)</b></sup>
                                <p class="text-success" *ngIf="admin.status" ><small>Online</small></p>
                                <p class="text-danger" *ngIf="!admin.status"><small>Offline</small></p>

                            </div>

                        </div>
                     </li>


                     <li class="list-group-item" *ngFor="let item of groupMembers; let i=index">
                      <div class="row">
                          <div class="col-lg-2"></div>
                          <div class="col-lg-4">
                              <img src="{{avathars[i+1]}}" class="userImage" alt="">

                          </div>
                          <div class="col-lg-5">
                              <p data-bs-toggle="tooltip" data-bs-placement="top" title="Tooltip on top" ><b>{{item.memberName}}</b></p>
                              <sup data-bs-toggle="tooltip" data-bs-placement="top" title="Tooltip on top" *ngIf="item.memberName==userName" ><b>(You)</b></sup>
                              <p class="text-success" *ngIf="item.status"><small>Online</small></p>
                              <p class="text-danger" *ngIf="!item.status"><small>Offline</small></p>
                          </div>
                          <div class="col-lg-1"></div>
                      </div>
                   </li>
                  </ul>
              </div>



            <div class="col-lg-9 messageCard">
              <div class="row  mt-5">

                <div *ngFor="let item of messages" class="container">

                  <div class="container">
                    <div class="d-flex justify-content-end" *ngIf="item.user==userName">
                      <div class="card cardRight mt-3" style="width: 30rem;">
                        <div class="card-body">
                          <h3 class="card-title text-light"><b>{{item.user}}</b></h3>
                          <p class="card-text text-light" >{{item.message}}</p>
                          <small style="float: right;padding: 5px; font-size: small;" class="text-light" >{{item.time}}</small>
                        </div>
                      </div>
                     </div>

                     <div class="d-flex justify-content-begin" *ngIf="item.user!=userName">
                      <div class="card cardLeft mt-3" style="width: 30rem;">
                        <div class="card-body">
                          <h3 class="card-title"><b>{{item.user}}</b></h3>
                          <p class="card-text">{{item.message}}</p>
                          <small style="float: right;padding: 5px; font-size:small;"  >{{item.time}}</small>
                        </div>
                      </div>
                     </div>
                  </div>

                </div>

             </div>





            </div>
            <div class="row typeMessage">
                <div class="col-lg-4"></div>
                <div class="col-lg-8" >

                  <div class="row d-flex align-items-center">
                    <div class="col-lg-1">
                      <!-- <span class="text-muted" (click)="toggled = !toggled" [(emojiPickerIf)]="toggled" [emojiPickerDirection]="'bottom' || 'top' || 'left' || 'right'" (emojiPickerSelect)="handleSelection($event)" ><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-emoji-smile" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"/>
                      </svg></span> -->



                      <!-- <label for="image" class=""><span class="text-muted paperClip" ><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-paperclip" viewBox="0 0 16 16">
                        <path d="M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0V3z"/>
                      </svg></span></label>

                         <input type='file' (change)="onSelectFile($event)"  class="form-control custom-file-upload" accept=".jpg,.jpeg,.pdf,doc,docx,application/msword,.png"  id="image" > -->


                         <mat-icon class="text-muted cursorStyle" *ngIf="!isEmoji" (click)="showEmoji()">sentiment_satisfied_alt</mat-icon>
                         <mat-icon class="text-muted cursorStyle" *ngIf="isEmoji" (click)="closeEmoji()">close</mat-icon>
                         <mat-icon class="text-muted cursorStyle">attach_file</mat-icon>
                    </div>

                      <div class="col-lg-10">

                        <emoji-mart *ngIf="isEmoji" (emojiClick)="addEmoji($event)" [showPreview]="false" [style]="{ position: 'absolute',width:'59%', bottom: '50px', right: '20px' }"  class="emojiSet"></emoji-mart>

                        <textarea  type="text" [(ngModel)]="newMessage" (keyup)="$event.keyCode == 13 && sendMessage()" (keyup)="$event.keyCode == 32 && classify()"  (keyup)="$event.keyCode == 8 && revert()" class="customInputStyle form-control" style="width: 300px;" placeholder="Type a message" ></textarea>


                      </div>
                    <div class="col-lg-1 ">

                        <mat-icon class="text-muted cursorStyle" (click)="sendMessage()">send</mat-icon>
                    </div>
                  </div>


                        </div>

                    </div>
                </div>




                <div class="mbl">

                  <mat-tab-group>
                    <mat-tab label="Members">



                      <ul class="list-group">
                        <li class="list-group-item ">
                           <b> Team {{chatRoom.chatName}}</b>
                        </li>
                       <li class="list-group-item">
                          <div class="d-flex align-items-center justify-content-between">

                              <div>
                                  <img src="{{avathars[0]}}" class="userImage" alt="">

                              </div>
                              <div>
                                  <p data-bs-toggle="tooltip" data-bs-placement="top" title="Tooltip on top" ><b>{{admin.memberName}}</b></p>
                                  <p class="textColor" ><small><b>Admin</b></small></p>
                             </div>
                             <div>
                              <p class="text-success" *ngIf="admin.status" ><small>Online</small></p>
                              <p class="text-danger" *ngIf="!admin.status"><small>Offline</small></p>
                             </div>

                          </div>
                       </li>


                       <li class="list-group-item" *ngFor="let item of groupMembers; let i=index">
                        <div class="d-flex align-items-center justify-content-between">

                            <div >
                                <img src="{{avathars[i+1]}}" class="userImage" alt="">

                            </div>
                            <div>
                                <p data-bs-toggle="tooltip" data-bs-placement="top" title="Tooltip on top" ><b>{{item.memberName}}</b></p>
                            </div>
                            <div>
                              <p class="text-success" *ngIf="item.status"><small>Online</small></p>
                              <p class="text-danger" *ngIf="!item.status"><small>Offline</small></p>
                            </div>

                        </div>
                     </li>
                    </ul>




                    </mat-tab>
                    <mat-tab label="Chats">




                      <div class="reversal">
                        <div class="mblmessage">
                          <div *ngFor="let item of messages" >

                            <div class="row container">
                              <div class="d-flex justify-content-end" *ngIf="item.user==userName">
                                <div class="card cardRight mt-3" style="width: 30rem;">
                                  <div class="card-body">
                                    <h3 class="card-title text-light"><b>{{item.user}}</b></h3>
                                    <p class="card-text text-light">{{item.message}}</p>
                                    <small style="float: right;padding: 5px; font-size: small;" class="text-light" >{{item.time}}</small>
                                  </div>
                                </div>
                               </div>

                               <div class="d-flex justify-content-begin" *ngIf="item.user!=userName">
                                <div class="card cardLeft mt-3" style="width: 30rem;">
                                  <div class="card-body">
                                    <h3 class="card-title"><b>{{item.user}}</b></h3>
                                    <p class="card-text">{{item.message}}</p>
                                    <small style="float: right;padding: 5px; font-size:small;"  >{{item.time}}</small>
                                  </div>
                                </div>
                               </div>
                            </div>

                          </div>
                        </div>
                      </div>






                      <div class="row d-flex align-items-center typeMobileMessage">
                        <div class="col-1">
                          <!-- <span class="text-muted" (click)="toggled = !toggled" [(emojiPickerIf)]="toggled" [emojiPickerDirection]="'bottom' || 'top' || 'left' || 'right'" (emojiPickerSelect)="handleSelection($event)" ><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-emoji-smile" viewBox="0 0 16 16">
                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                            <path d="M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"/>
                          </svg></span> -->
                          <mat-icon class="text-muted cursorStyle" *ngIf="!isEmoji" (click)="showEmoji()">sentiment_satisfied_alt</mat-icon>
                         <mat-icon class="text-muted cursorStyle" *ngIf="isEmoji" (click)="closeEmoji()">close</mat-icon>
                         <!-- <mat-icon class="text-muted cursorStyle">attach_file</mat-icon> -->

                        </div>

                          <div class="col-10" >
                            <emoji-mart *ngIf="isEmoji" (emojiClick)="addEmoji($event)" [showPreview]="false" [style]="{ position: 'absolute',width:'90%', bottom: '50px', right: '10px' }"  class="emojiSet"></emoji-mart>

                            <textarea  type="text" [(ngModel)]="newMessage" (keyup)="$event.keyCode == 13 && sendMessage()" (keyup)="$event.keyCode == 32 && classify()"  (keyup)="$event.keyCode == 8 && revert()" class="customInputStyle form-control" style="width: 280px;" placeholder="Type a message" ></textarea>

                          </div>
                        <div class="col-1">
                          <mat-icon class="text-muted cursorStyle" (click)="sendMessage()">send</mat-icon>
                        </div>
                      </div>






















                    </mat-tab>
                  </mat-tab-group>

                </div>







            </div>

          </div>





          <!-- <input [(ngModel)]="newMessage" (keyup)="$event.keyCode == 13 && sendMessage()" />
          <button (click)="sendMessage()">Send Message</button> -->
